---
http_interactions:
- request:
    method: post
    uri: https://api.flow.io/workarea-sandbox/cards
    body:
      encoding: UTF-8
      string: '{"number":"4012888888881881","cipher":null,"expiration_month":1,"expiration_year":2019,"name":"Ben
        Crouse","cvv":"999","address":null,"ip":null,"challenge_text":null,"challenge_cipher":null,"token_type":null,"discriminator":"card_form"}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      - apibuilder 0.14.3 app.apibuilder.io/flow/api/0.6.25/ruby_client
      Authorization:
      - Basic RzhqUmV4QkJRdmV1TEwyczZUUWZjSWk2TnZDanhjQjQ3Z3dudmNkbDR4VU5QRUp6QlV0Z3h0b1BRNkZFUjZpSkxmeG1TNGd4M0JxejB4VE5uMlZnenlXTmg4U1hxTHRuSnBjZk1iYTdlaDhyOGxNQTRWd2xOVjNtSUJNZTBBNXI6
      X-Apidoc-Version:
      - 0.6.19
      X-Apidoc-Version-Major:
      - '0'
      Content-Type:
      - application/json; charset=UTF-8
  response:
    status:
      code: 201
      message: Created
    headers:
      Date:
      - Thu, 06 Sep 2018 13:50:13 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '244'
      Connection:
      - keep-alive
      Set-Cookie:
      - __cfduid=d674c82b08944ec5e73240475ab1d92a61536241812; expires=Fri, 06-Sep-19
        13:50:12 GMT; path=/; domain=.api.flow.io; HttpOnly
      - __cfduid=dd75ba3219334fa91ee647442403a873e1536241812; Max-Age=31535999; Expires=Fri,
        06 Sep 2019 13:50:12 GMT; Path=/; Domain=.payment.api.flow.io; HTTPOnly
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Request-Time:
      - '76'
      Vary:
      - Origin
      X-Flow-Request-Id:
      - api0ddc473e9d514ccda5616c83b582d491
      X-Flow-Server:
      - payment
      X-Trace-Token:
      - 6e9eb4075694-297447
      Server:
      - cloudflare
      Cf-Ray:
      - 456167426afb9278-EWR
    body:
      encoding: UTF-8
      string: '{"id":"crd-a5f9faf061754e29980882037e8ba50e","token":"F96IhHYOjjHHK3t1l26zbb8A6wg9TIPpKfWJrXcejzFcQAo5n3JGX8z0UfQejxeP","type":"visa","expiration":{"month":1,"year":2019},"iin":"401288","last4":"1881","name":"Ben
        Crouse","discriminator":"card"}'
    http_version: 
  recorded_at: Thu, 06 Sep 2018 13:50:13 GMT
- request:
    method: post
    uri: https://api.flow.io/workarea-sandbox/authorizations
    body:
      encoding: UTF-8
      string: '{"token":"F96IhHYOjjHHK3t1l26zbb8A6wg9TIPpKfWJrXcejzFcQAo5n3JGX8z0UfQejxeP","amount":"50000.0","currency":"USD","customer":{"name":{"first":"Ben","last":"Crouse"},"number":null,"phone":null,"email":null,"address":null},"key":null,"cvv":null,"attributes":null,"destination":null,"billing_address":null,"ip":null,"options":null,"redirect_urls":null,"discriminator":"direct_authorization_form"}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      - apibuilder 0.14.3 app.apibuilder.io/flow/api/0.6.25/ruby_client
      Authorization:
      - Basic RzhqUmV4QkJRdmV1TEwyczZUUWZjSWk2TnZDanhjQjQ3Z3dudmNkbDR4VU5QRUp6QlV0Z3h0b1BRNkZFUjZpSkxmeG1TNGd4M0JxejB4VE5uMlZnenlXTmg4U1hxTHRuSnBjZk1iYTdlaDhyOGxNQTRWd2xOVjNtSUJNZTBBNXI6
      X-Apidoc-Version:
      - 0.6.19
      X-Apidoc-Version-Major:
      - '0'
      Content-Type:
      - application/json; charset=UTF-8
  response:
    status:
      code: 201
      message: Created
    headers:
      Date:
      - Thu, 06 Sep 2018 13:50:13 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '987'
      Connection:
      - keep-alive
      Set-Cookie:
      - __cfduid=d1a7373c01d2adb681f80ff174b9890e71536241813; Max-Age=31536000; Expires=Fri,
        06 Sep 2019 13:50:13 GMT; Path=/; Domain=.payment.api.flow.io; HTTPOnly
      - __cfduid=de79bfd1f3c3e38744707dbdd5b0482e11536241813; expires=Fri, 06-Sep-19
        13:50:13 GMT; path=/; domain=.api.flow.io; HttpOnly
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Request-Time:
      - '134'
      Vary:
      - Origin
      X-Flow-Request-Id:
      - api53b98dafac1d490db0c24af22fde9132
      X-Flow-Server:
      - payment
      X-Trace-Token:
      - de49ba3b67d6-295503
      Server:
      - cloudflare
      Cf-Ray:
      - 45616744097c9a1c-EWR
    body:
      encoding: UTF-8
      string: '{"id":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","key":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","merchant_of_record":"flow","card":{"id":"crd-a5f9faf061754e29980882037e8ba50e","token":"F96IhHYOjjHHK3t1l26zbb8A6wg9TIPpKfWJrXcejzFcQAo5n3JGX8z0UfQejxeP","discriminator":"card_reference"},"amount":50000,"currency":"USD","customer":{"name":{"first":"Ben","last":"Crouse"}},"attributes":{},"result":{"status":"authorized"},"created_at":"2018-09-06T13:50:13.284Z","method":{"id":"visa","type":"card","name":"VISA","images":{"small":{"url":"https://flowcdn.io/util/logos/payment-methods/visa/30/original.png","width":65,"height":41},"medium":{"url":"https://flowcdn.io/util/logos/payment-methods/visa/60/original.png","width":100,"height":60},"large":{"url":"https://flowcdn.io/util/logos/payment-methods/visa/120/original.png","width":256,"height":256}},"regions":["world"]},"requested":{"amount":50000,"currency":"USD"},"base":{"amount":50000,"currency":"USD"},"discriminator":"card_authorization"}'
    http_version: 
  recorded_at: Thu, 06 Sep 2018 13:50:13 GMT
- request:
    method: post
    uri: https://api.flow.io/workarea-sandbox/captures
    body:
      encoding: UTF-8
      string: '{"authorization_id":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","key":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","amount":"50000.0","currency":"USD","attributes":null}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      - apibuilder 0.14.3 app.apibuilder.io/flow/api/0.6.25/ruby_client
      Authorization:
      - Basic RzhqUmV4QkJRdmV1TEwyczZUUWZjSWk2TnZDanhjQjQ3Z3dudmNkbDR4VU5QRUp6QlV0Z3h0b1BRNkZFUjZpSkxmeG1TNGd4M0JxejB4VE5uMlZnenlXTmg4U1hxTHRuSnBjZk1iYTdlaDhyOGxNQTRWd2xOVjNtSUJNZTBBNXI6
      X-Apidoc-Version:
      - 0.6.19
      X-Apidoc-Version-Major:
      - '0'
      Content-Type:
      - application/json; charset=UTF-8
  response:
    status:
      code: 201
      message: Created
    headers:
      Date:
      - Thu, 06 Sep 2018 13:50:13 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '393'
      Connection:
      - keep-alive
      Set-Cookie:
      - __cfduid=d61107f582a2c9a0e158cd1534a1cc2d31536241813; Max-Age=31536000; Expires=Fri,
        06 Sep 2019 13:50:13 GMT; Path=/; Domain=.payment.api.flow.io; HTTPOnly
      - __cfduid=d8d6ccc9769a9db87a43f450f625fc2941536241813; expires=Fri, 06-Sep-19
        13:50:13 GMT; path=/; domain=.api.flow.io; HttpOnly
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Request-Time:
      - '81'
      Vary:
      - Origin
      X-Flow-Request-Id:
      - api54404b64da4e4803af1794ef639c8335
      X-Flow-Server:
      - payment
      X-Trace-Token:
      - 939b7e367ff0-297292
      Server:
      - cloudflare
      Cf-Ray:
      - 456167468cb69a16-EWR
    body:
      encoding: UTF-8
      string: '{"id":"cap-3af2e7d4ecf147119fa3c2d26d2d4822","key":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","authorization":{"id":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","key":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX"},"amount":50000,"currency":"USD","created_at":"2018-09-06T13:50:13.604Z","status":"succeeded","requested":{"amount":50000,"currency":"USD"},"attributes":{},"base":{"amount":50000,"currency":"USD"}}'
    http_version: 
  recorded_at: Thu, 06 Sep 2018 13:50:13 GMT
- request:
    method: post
    uri: https://api.flow.io/workarea-sandbox/refunds
    body:
      encoding: UTF-8
      string: '{"authorization_id":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","capture_id":null,"order_number":null,"key":null,"amount":"50000.0","currency":"USD","rma_key":null,"attributes":null}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
      - apibuilder 0.14.3 app.apibuilder.io/flow/api/0.6.25/ruby_client
      Authorization:
      - Basic RzhqUmV4QkJRdmV1TEwyczZUUWZjSWk2TnZDanhjQjQ3Z3dudmNkbDR4VU5QRUp6QlV0Z3h0b1BRNkZFUjZpSkxmeG1TNGd4M0JxejB4VE5uMlZnenlXTmg4U1hxTHRuSnBjZk1iYTdlaDhyOGxNQTRWd2xOVjNtSUJNZTBBNXI6
      X-Apidoc-Version:
      - 0.6.19
      X-Apidoc-Version-Major:
      - '0'
      Content-Type:
      - application/json; charset=UTF-8
  response:
    status:
      code: 201
      message: Created
    headers:
      Date:
      - Thu, 06 Sep 2018 13:50:14 GMT
      Content-Type:
      - application/json
      Content-Length:
      - '827'
      Connection:
      - keep-alive
      Set-Cookie:
      - __cfduid=d6ab99c77020cd0eb9305e5b466dae8ee1536241814; expires=Fri, 06-Sep-19
        13:50:14 GMT; path=/; domain=.api.flow.io; HttpOnly
      - __cfduid=da48f0310f3e4a1e70d22f98dfa74fd0e1536241814; Max-Age=31536000; Expires=Fri,
        06 Sep 2019 13:50:14 GMT; Path=/; Domain=.payment.api.flow.io; HTTPOnly
      Expect-Ct:
      - max-age=604800, report-uri="https://report-uri.cloudflare.com/cdn-cgi/beacon/expect-ct"
      Request-Time:
      - '88'
      Vary:
      - Origin
      X-Flow-Request-Id:
      - api0823dbd7492c48d387c72e02af02c979
      X-Flow-Server:
      - payment
      X-Trace-Token:
      - 313e2edd96ef-297555
      Server:
      - cloudflare
      Cf-Ray:
      - 456167499efa9272-EWR
    body:
      encoding: UTF-8
      string: '{"id":"ref-ed463ef6a03243fd8b51966afb64cb4a","key":"ref-ed463ef6a03243fd8b51966afb64cb4a","authorization":{"id":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","key":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX"},"amount":50000,"currency":"USD","captures":[{"capture":{"id":"cap-3af2e7d4ecf147119fa3c2d26d2d4822","key":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","authorization":{"id":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX","key":"aut-wKOKW3zagoYqLcr96aQA6K7CyGSsjdeX"},"amount":50000,"currency":"USD","created_at":"2018-09-06T13:50:13.604Z","status":"succeeded","requested":{"amount":50000,"currency":"USD"},"attributes":{},"base":{"amount":50000,"currency":"USD"}},"amount":50000}],"created_at":"2018-09-06T13:50:14.086Z","status":"succeeded","requested":{"amount":50000,"currency":"USD"},"attributes":{},"base":{"amount":50000,"currency":"USD"}}'
    http_version: 
  recorded_at: Thu, 06 Sep 2018 13:50:14 GMT
recorded_with: VCR 2.9.3
