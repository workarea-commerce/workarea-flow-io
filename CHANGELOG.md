Workarea Flow Io 1.3.0 (2020-01-21)
--------------------------------------------------------------------------------

*   Fix syntax

    Tom Scott

*   Fix RuboCop config

    Tom Scott

*   Bump gems so they build for later versions

    Tom Scott

*   Revise Cart Pricing

    Workarea now sends over the prices that were actually displayed to the
    user in the cart to Flow's backend, eliminating any kind of price
    discrepency between Flow and the Workarea application. Additionally, the
    current experience is now being used to dictate the currency of all item
    prices and discounts sent over in the `OrderPutForm`. In order to
    prevent unnecessary test failures related to the year 2020, this gem now
    depends on v3.3.36 or higher of the platform.

    FLOW-9
    Tom Scott

*   Update how discounts are passed to Flow

    Use flow's newer fields that accept an array of discounts instead of
    having to pass a single discount adjustment
    Eric Pigeon

*   Add admin section for flow pricing imports

    Eric Pigeon

*   Fix Arity of initCountryPicker()

    The `initCountryPicker()` function had its arity changed as a result of
    wrapping the SDK loader in a promise.

    FLOW-4
    Tom Scott

*   Download Full CSV File from SFTP

    Apparently, `.gets` only grabs the first line of the file. Using
    `sftp.download!` will output the whole contents of a file to String,
    which is what we want here, and I couldn't figure out how to make it
    stream `.gets` to more than one line.

    FLOW-6
    Tom Scott

*   Update Local Items and Pricing with CSV

    Workarea now adds the ability to periodically update local items using a
    flat CSV file stored on Flow's SFTP server. This is the most common way
    of integrating product data with Flow, and requires additional FTP
    credentials in secrets. All CSV imports are uploaded with Dragonfly and
    stored locally for archival purposes, and in case anything goes wrong.
    Additionally, the `local_item_upserted` webhook is no longer created or
    supported, as the plugin will now solely rely on flat file importing as
    a means of integrating local item pricing with the Workarea pricing
    system.

    FLOW-6
    Tom Scott

*   Update Webhooks Setup

    The webhook shared secret is now generated by the Workarea application
    automatically as part of the install procedure for the plugin, right
    before webhooks are created on Flow's side. Update README to include
    information on new configuration settings, remove notes on the webhook
    secret, and reformat the docs so they're friendly to total newbies as
    well as an old Linuxbeard. Fix some typos and grammar in the README as
    well. This also adds the `LICENSE` file to the repository for future open
    source goodness.

    FLOW-2
    Tom Scott

*   Add FlowJS for Real-Time Pricing Updates

    It's possible that prices could change between the time they are synced
    over to us via the (upcoming) CSV FTP upload, and they could change for
    experiences that aren't explicitly configured in the Flow Console. In
    order to address this, the FlowJS library has been integrated to provide
    pricing updates to each product as it appears on screen. A future code
    change will (probably) be made that addresses the consumption of this CSV
    file, which is how we'll be obtaining prices from Flow instead of using
    the webhooks.

    In addition, this removes the old "Flow Beacon" and "Flow Country
    Picker" scripts, since `flow.js` handles both of those use cases
    out-of-box.

    This JS integration is fully opt-in, and won't activate unless you
    configure `config.flow_io.enable_javascript = true`.

    FLOW-4
    Tom Scott

*   Add GitHub Workflow and Fix Tests

    - Add static analysis configuration and run jobs in parallel
    - Enforce Ruby 2.4 for local Workarea compatibility
    - Run auto-corrections in RuboCop
    - Fix plugin tests

    FLOW-7
    Tom Scott

*   Add GitHub workflows and templates

    Tom Scott

*   Update setting site locale with multiste

    Multisite uses it's own method to set I18n.locale; override this method
    to prevent from setting the locale from a flow experience

    FLOW-59
    Eric Pigeon

*   Upgrade for Workarea V3.4

    Remove call to removed class `SaveOrderAnalytics` and update
    `Workarea::OrderMetrics#discount_adjustments` to use `original_discounts`
    for flow orders

    FLOW-57
    Eric Pigeon



Workarea Flow Io 1.2.1 (2020-01-21)
--------------------------------------------------------------------------------

*   Fix syntax

    Tom Scott

*   Fix RuboCop config

    Tom Scott

*   Bump gems so they build for later versions

    Tom Scott

*   Revise Cart Pricing

    Workarea now sends over the prices that were actually displayed to the
    user in the cart to Flow's backend, eliminating any kind of price
    discrepency between Flow and the Workarea application. Additionally, the
    current experience is now being used to dictate the currency of all item
    prices and discounts sent over in the `OrderPutForm`. In order to
    prevent unnecessary test failures related to the year 2020, this gem now
    depends on v3.3.36 or higher of the platform.

    FLOW-9
    Tom Scott

*   Update how discounts are passed to Flow

    Use flow's newer fields that accept an array of discounts instead of
    having to pass a single discount adjustment
    Eric Pigeon

*   Add admin section for flow pricing imports

    Eric Pigeon

*   Fix Arity of initCountryPicker()

    The `initCountryPicker()` function had its arity changed as a result of
    wrapping the SDK loader in a promise.

    FLOW-4
    Tom Scott

*   Download Full CSV File from SFTP

    Apparently, `.gets` only grabs the first line of the file. Using
    `sftp.download!` will output the whole contents of a file to String,
    which is what we want here, and I couldn't figure out how to make it
    stream `.gets` to more than one line.

    FLOW-6
    Tom Scott

*   Update Local Items and Pricing with CSV

    Workarea now adds the ability to periodically update local items using a
    flat CSV file stored on Flow's SFTP server. This is the most common way
    of integrating product data with Flow, and requires additional FTP
    credentials in secrets. All CSV imports are uploaded with Dragonfly and
    stored locally for archival purposes, and in case anything goes wrong.
    Additionally, the `local_item_upserted` webhook is no longer created or
    supported, as the plugin will now solely rely on flat file importing as
    a means of integrating local item pricing with the Workarea pricing
    system.

    FLOW-6
    Tom Scott

*   Update Webhooks Setup

    The webhook shared secret is now generated by the Workarea application
    automatically as part of the install procedure for the plugin, right
    before webhooks are created on Flow's side. Update README to include
    information on new configuration settings, remove notes on the webhook
    secret, and reformat the docs so they're friendly to total newbies as
    well as an old Linuxbeard. Fix some typos and grammar in the README as
    well. This also adds the `LICENSE` file to the repository for future open
    source goodness.

    FLOW-2
    Tom Scott

*   Add FlowJS for Real-Time Pricing Updates

    It's possible that prices could change between the time they are synced
    over to us via the (upcoming) CSV FTP upload, and they could change for
    experiences that aren't explicitly configured in the Flow Console. In
    order to address this, the FlowJS library has been integrated to provide
    pricing updates to each product as it appears on screen. A future code
    change will (probably) be made that addresses the consumption of this CSV
    file, which is how we'll be obtaining prices from Flow instead of using
    the webhooks.

    In addition, this removes the old "Flow Beacon" and "Flow Country
    Picker" scripts, since `flow.js` handles both of those use cases
    out-of-box.

    This JS integration is fully opt-in, and won't activate unless you
    configure `config.flow_io.enable_javascript = true`.

    FLOW-4
    Tom Scott

*   Add GitHub Workflow and Fix Tests

    - Add static analysis configuration and run jobs in parallel
    - Enforce Ruby 2.4 for local Workarea compatibility
    - Run auto-corrections in RuboCop
    - Fix plugin tests

    FLOW-7
    Tom Scott

*   Add GitHub workflows and templates

    Tom Scott

*   Update setting site locale with multiste

    Multisite uses it's own method to set I18n.locale; override this method
    to prevent from setting the locale from a flow experience

    FLOW-59
    Eric Pigeon

*   Upgrade for Workarea V3.4

    Remove call to removed class `SaveOrderAnalytics` and update
    `Workarea::OrderMetrics#discount_adjustments` to use `original_discounts`
    for flow orders

    FLOW-57
    Eric Pigeon



Workarea Flow Io 1.2.0 (2019-05-14)
--------------------------------------------------------------------------------

*   Upgrade for Workarea V3.4

    Remove call to removed class `SaveOrderAnalytics` and update
    `Workarea::OrderMetrics#discount_adjustments` to use `original_discounts`
    for flow orders

    FLOW-57

Workarea Flow Io 1.1.2 (2019-09-20)
--------------------------------------------------------------------------------

*   Handle orders changing currency during flow checkout

    Changing shipping address in flow checkout would update the experience
    and currency causing the webhook to error.  Update the
    `Order#experience` when processing the order upserted webhook

    FLOW-60
    Eric Pigeon



Workarea Flow Io 1.1.1 (2019-07-18)
--------------------------------------------------------------------------------

*   Update setting site locale with multiste

    Multisite uses it's own method to set I18n.locale; override this method
    to prevent from setting the locale from a flow experience

    FLOW-59
    Eric Pigeon



Workarea Flow Io 1.1.0 (2019-04-16)
--------------------------------------------------------------------------------

*   Set payment token to correct value from activemerchant gateway

    Properly set the stored credit card the value returned from the store
    method on the activemerchant integration.

    FLOW-58
    Jeff Yucis



Workarea Flow Io 1.0.0 (2018-11-13)
--------------------------------------------------------------------------------

*   Workarea Flow.io

    Flow enables merchants to create localized shopping experiences,
    including localized prices, payment and shipping options.

    FLOW-1
    Eric Pigeon
