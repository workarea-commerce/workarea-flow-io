-# TODO v4 rewrite, simply and add better classes
- cache "#{product.cache_key}/prices", expires_in: Workarea.config.cache_expirations.product_pricing_fragment_cache do
  .product-prices__flow-wrapper
    - if product.one_price?
      %p.product-prices__price
        - if product.show_sell_range?
          %span.product-prices__sell-price.product-prices__sell-price--min{ data: { flow: { item_number: product.sell_min_sku } } }
            %span{ data: { flow: { localize: 'item-price' } } }= number_to_currency(product.sell_min_price)
          %span.product-prices__sell-price.product-prices__sell-price--max{ data: { flow: { item_number: product.sell_min_sku } } }
            %span{ data: { flow: { localize: 'item-price' } } } – #{number_to_currency product.sell_max_price}
        - else
          %span.product-prices__sell-price{ data: { flow: { item_number: product.current_sku } } }
            %span{ data: { flow: { localize: 'item-price' } } }= number_to_currency(product.sell_min_price)

    - else
      - if product.on_sale?
        %p.product-prices__price.product-prices__price--on-sale
          - if product.show_sell_range?
            %strong.product-prices__sell-price.product-prices__sell-price--min{ data: { flow: { item_number: product.sell_min_sku } } }
              %span{ data: { flow: { localize: 'item-price' } } }= number_to_currency(product.sell_min_price)
            %strong.product-prices__sell-price.product-prices__sell-price--max{ data: { flow: { item_number: product.sell_max_sku } } }
              %span{ data: { flow: { localize: 'item-price' } } } – #{number_to_currency product.sell_max_price}
          - else
            %strong.product-prices__sell-price{ data: { flow: { item_number: product.current_sku } } }
              %span{ data: { flow: { localize: 'item-price' } } }= number_to_currency(product.sell_min_price)

      - else
        %p.product-prices__price
          - if product.show_sell_range?
            %span.product-prices__sell-price.product-prices__sell-price--min{ data: { flow: { item_number: product.sell_min_sku } } }
              %span{ data: { flow: { localize: 'item-price' } } }= number_to_currency(product.sell_min_price)
            %span.product-prices__sell-price.product-prices__sell-price--max{ data: { flow: { item_number: product.sell_max_sku } } }
              %span{ data: { flow: { localize: 'item-price' } } } – #{number_to_currency product.sell_max_price}
          - else
            %span.product-prices__sell-price{ data: { flow: { item_number: product.current_sku } } }
              %span{ data: { flow: { localize: 'item-price' } } }= number_to_currency(product.sell_min_price)

      %p.product-prices__price.product-prices__price--original
        - if product.show_original_range?
          %s.product-prices__original-price.product-prices__original-price--range
            %span{ data: { flow: { item_number: product.original_min_sku } } }
              %span{ data: { flow: { localize: 'item-price-attribute', item_price_attribute: 'regular' } } }
                #{number_to_currency product.original_min_price}
            %span{ data: { flow: { item_number: product.original_max_sku } } }
              %span{ data: { flow: { localize: 'item-price-attribute', item_price_attribute: 'regular' } } }
                – #{number_to_currency product.original_max_price}
        - else
          %s.product-prices__original-price{ data: { flow: { localize: 'item-price-attribute', item_price_attribute: 'regular' } } }
            = number_to_currency product.original_min_price

  = append_partials('storefront.product_pricing', product: product)
